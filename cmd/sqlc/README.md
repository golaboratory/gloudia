# sqlcの利用について

## 参考

* [sqlc](https://docs.sqlc.dev/en/stable/)

## ファイル構成

* queriesディレクトリ
    * テーブルごとに使用するクエリの定義を行います
* schema.sql
    * 全テーブルのDDL


## queriesディレクトリ配下のクエリファイル

* ファイル名の命名は、**テーブル名.sql** としてください
* 同一テーブルでも、明確に役割の異なる場合は、**テーブル名.ext.sql** のようなフォーマットで追加してもかまいません
* 複数のテーブルを結合するクエリを記述する場合は、下記を検討してください
    * 主体となるテーブルのクエリファイルに記述する (主データ+明細データ+マスタデータ　などの場合は、こちら)
    * 主体テーブルを決定できない場合は、 **_メソッド名.sql** と命名し、単一クエリのみを記載してください 


## 各クエリのメソッド名について

各メソッドは一つのパッケージ内に定義されているため、ユニークである必要があります。

### 命名規則のポイント
* 動詞 + 主語 + 条件: 動詞（Get, Update, Delete, Createなど）を先頭に置き、操作内容を明確にする。
* 条件の表現: 条件（ByID, ByParentIDなど）を明記して、フィルタ条件を明示する。
* 統一感のある形式: 一貫したフォーマットを採用することで、メソッド名から直感的に用途を把握できるようにする。


### 命名の基本的なパターン

| 処理 | フォーマット | 例示 |
| --- | --- | --- |
| Idを条件として、単一のテーブルデータを取得する | Get[テーブル]ByID | GetUserByID |
| 親テーブルのIDを条件として、複数のテーブルデータを取得する | Get[テーブル]ListByParentID | GetUserListByParentID |
| テーブルの全件を取得する | Get[テーブル]List | GetUserList |
| IDを条件として、単一のテーブルデータを更新する | Update[テーブル]ByID | UpdateUserByID |
| IDを条件として、単一のテーブルデータを削除する | Delete[テーブル]ByID | DeleteUserByID |
| IDを条件として、単一のテーブルデータを論理削除する | ArchiveDelete[テーブル]ByID | ArchiveUserByID |
| 単一のUserテーブルデータを作成する | Create[テーブル] | CreateUser |
| 任意の条件で検索処理を行う（検索・一覧画面など） | Search[取得データの論理名称] | SearchNewYearReserveList |
